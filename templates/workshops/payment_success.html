{% extends 'base.html' %}
{% load static %}

{% block title %}Registration Successful - Titanium Science Club{% endblock %}

{% block extra_css %}
<style>
    @keyframes checkmark {
        0% {
            transform: scale(0);
            opacity: 0;
        }

        50% {
            transform: scale(1.2);
        }

        100% {
            transform: scale(1);
            opacity: 1;
        }
    }

    .success-checkmark {
        animation: checkmark 0.6s ease-out;
    }
</style>
{% endblock %}

{% block content %}
<div class="container-narrow">
    <!-- Success Message -->
    <div class="card text-center" style="border-top: 4px solid var(--success-text);">
        <div class="card-body">
            <div class="success-checkmark" style="font-size: 4rem; color: var(--success-text); margin-bottom: 1rem;">
                <i class="fas fa-check-circle"></i>
            </div>
            <h1 style="color: var(--gray-900); margin-bottom: 1rem; font-size: 2rem;">
                {% if payment %}
                Payment Successful!
                {% else %}
                Registration Successful!
                {% endif %}
            </h1>
            <p style="font-size: 1.125rem; color: var(--gray-600);">
                Your registration has been confirmed. We look forward to seeing you at the workshop!
            </p>
        </div>
    </div>

    <!-- Registration Details -->
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">
                <i class="fas fa-file-alt"></i> Registration Details
            </h3>
        </div>
        <div class="card-body">
            <div
                style="background: var(--gray-50); padding: 1.5rem; border-radius: var(--radius-lg); margin-bottom: 1rem;">
                <p style="margin-bottom: 0.5rem;">
                    <strong>Registration Number:</strong><br>
                    <span style="font-size: 1.5rem; font-weight: 700; color: var(--primary-600);">
                        {{ registration.registration_number }}
                    </span>
                </p>
                <p style="margin-top: 1rem; margin-bottom: 0; color: var(--gray-600); font-size: 0.875rem;">
                    Please save this registration number for future reference
                </p>
            </div>

            <hr style="margin: 1.5rem 0; border: none; border-top: 1px solid var(--gray-200);">

            <h4 style="margin-bottom: 1rem;">Student Information</h4>
            <p><strong>Name:</strong> {{ registration.student_name }}</p>
            <p><strong>Grade:</strong> {{ registration.grade }}</p>
            <p><strong>School:</strong> {{ registration.school_name }}</p>
            <p><strong>Contact:</strong> {{ registration.contact_number }}</p>
            <p><strong>Email:</strong> {{ registration.email }}</p>

            <hr style="margin: 1.5rem 0; border: none; border-top: 1px solid var(--gray-200);">

            <h4 style="margin-bottom: 1rem;">Workshop Information</h4>
            <p><strong>Workshop:</strong> {{ workshop.name }}</p>
            <p><strong>Date:</strong> {{ workshop.workshop_date }}</p>
            <p><strong>Time:</strong> {{ workshop.time }}</p>
            <p><strong>Venue:</strong> {{ workshop.venue }}</p>

            {% if payment %}
            <hr style="margin: 1.5rem 0; border: none; border-top: 1px solid var(--gray-200);">

            <h4 style="margin-bottom: 1rem;">Payment Information</h4>
            <p><strong>Transaction ID:</strong> {{ payment.transaction_id }}</p>
            <p><strong>Amount Paid:</strong> <span style="color: var(--success-text); font-weight: 700;">à§³{{
                    payment.amount }}</span></p>
            <p><strong>Payment Status:</strong> <span
                    style="color: var(--success-text); font-weight: 700;">COMPLETED</span></p>
            {% endif %}
        </div>
    </div>

    <!-- Actions -->
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">
                <i class="fas fa-tasks"></i> Next Steps
            </h3>
        </div>
        <div class="card-body">
            <div class="form-group">
                <a href="{% url 'download_receipt' registration.id %}" class="btn btn-primary btn-lg btn-block">
                    <i class="fas fa-download"></i> Download Receipt (PDF)
                </a>
            </div>

            <div class="form-group">
                <a href="{% url 'view_receipt' registration.id %}" class="btn btn-secondary btn-lg btn-block">
                    <i class="fas fa-eye"></i> View Receipt
                </a>
            </div>

            <div class="form-group" style="margin-bottom: 0;">
                <a href="{% url 'workshop_list' %}" class="btn btn-outline btn-lg btn-block">
                    <i class="fas fa-arrow-left"></i> Back to Workshops
                </a>
            </div>
        </div>
    </div>

    <!-- Information Notice -->
    <div class="card" style="margin-top: 2rem;">
        <div class="card-body">
            <h4 style="margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                <i class="fas fa-envelope" style="color: var(--primary-500);"></i>
                Confirmation Email
            </h4>
            <p style="margin-bottom: 0; color: var(--gray-600);">
                A confirmation email has been sent to <strong>{{ registration.email }}</strong>.
                Please check your inbox (and spam folder) for the registration details and receipt.
            </p>
        </div>
    </div>
</div>
{% endblock %}